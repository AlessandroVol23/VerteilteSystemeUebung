import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.net.Socket;

public class Responder implements Runnable {

	private Socket clientConnection;

	public Responder(Socket clientConnection) {
		this.clientConnection = clientConnection;

		System.out.println("Neue Verbindung von " + clientConnection.getRemoteSocketAddress().toString());
		System.out.println("Hallo Welt!");
	}

	@Override
	public void run() {

		System.out.println("Thread gestartet");
		while (true) {

			try {

				InputStream in = clientConnection.getInputStream();
				BufferedReader reader = new BufferedReader(new InputStreamReader(in));

				OutputStream out = clientConnection.getOutputStream();
				PrintWriter writer = new PrintWriter(out);

				String eingang = reader.readLine();
				System.out.println(eingang);

				writer.println("Antwort von Server: " + "*" + eingang + "*");
				writer.flush();

				if (eingang == "EXIT") {
					clientConnection.close();
				}

			} catch (IOException e) {
				e.printStackTrace();
			}
		}
	}
}