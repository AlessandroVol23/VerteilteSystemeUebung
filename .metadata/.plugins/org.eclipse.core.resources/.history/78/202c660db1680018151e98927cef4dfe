package uebung02_c_050618;

import java.util.Random;

public class Fahrzeughersteller implements Runnable {

	private Parkhaus parkhaus;
	private Object monitor = new Object();

	public Fahrzeughersteller(Parkhaus _parkhaus) {
		this.parkhaus = _parkhaus;
	}

	@Override
	public void run() {
		System.out.println("IN RUN METHODE");
		while (true) {
			System.out.println("IN WHILE");

			try {

				this.herstellen();
				Thread.sleep(new Random().nextInt(10000));

			} catch (InterruptedException e) {
				e.printStackTrace();
			}

		}
	}

	public void herstellen() {

		synchronized (monitor) {

			while (parkhaus.istKapazitaetFrei()) {
				try {
					monitor.wait();
				} catch (InterruptedException e) {
					e.printStackTrace();
				}
			}
			monitor.notifyAll();
			Auto a = new Auto("R-FH-" + new Random().nextInt(1000));
			parkhaus.autoEinstellen(a);
			System.out.println("Hersteller: Auto " + a.getKennzeichen() + " hergerstellt.");
		}
	}

}
